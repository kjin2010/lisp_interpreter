<!DOCTYPE html>
<!-- saved from url=(0042)https://eecs6009.mit.edu/fall17/labs/lab8A -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<!-- This page was generated by CAT-SOOP (development version).  miau. -->

<title>6.009 Fall 2017</title>
<link href="https://eecs6009.mit.edu/__STATIC__/fall17/favicon.gif" rel="icon" type="image/gif">
<!-- jQuery and Bootstrap and SweetAlert -->
<script src="./Lab 8A_files/jquery.js"></script>
<link href="./Lab 8A_files/bootstrap.css" rel="stylesheet">
<script src="./Lab 8A_files/bootstrap.js"></script>
<link href="./Lab 8A_files/sweetalert2.css" rel="stylesheet">
<script src="./Lab 8A_files/sweetalert2.js"></script>
<!-- set up JS namespace for catsoop -->
<script type="text/javascript">
    var catsoop = {plugins: {}};
    </script>
<!-- automatically adjust the top padding so that the whole page is visible even if the navbar's height changes -->
<!-- also move the target for anchors so the navbar doesn't hide them -->
<script type="text/javascript">
      catsoop.scroll_header = function(){
          scrollBy(0, -$('#cs_main_navbar').height());
      }

      catsoop.set_top_margin = function(){
          $("#myPage").css('padding-top', $('#cs_main_navbar').height());
      }

      $(document).ready(function(){
        catsoop.set_top_margin();
        if (location.hash) catsoop.scroll_header();
        window.addEventListener("hashchange", catsoop.scroll_header);
      });
      $(window).resize(catsoop.set_top_margin);
    </script>
<!-- Additional styling specific for course-->
<link href="./Lab 8A_files/process_theme" rel="stylesheet" type="text/css">
<!-- load in katex and mathjax, and CAT-SOOP-specific math rendering  -->
<script src="./Lab 8A_files/katex.min.js" type="text/javascript"></script>
<link href="./Lab 8A_files/katex.min.css" rel="stylesheet" type="text/css">
<script src="./Lab 8A_files/MathJax.js" type="text/javascript"></script>
<script src="./Lab 8A_files/cs_math.js" type="text/javascript"></script>
<!-- CAT-SOOP Hashing -->
<script src="./Lab 8A_files/cs_hash.js" type="text/javascript"></script>
<!-- Syntax Highlighting -->
<link href="./Lab 8A_files/catsoop.css" rel="stylesheet">
<script src="./Lab 8A_files/highlight.pack.js" type="text/javascript"></script>
<script type="text/javascript">
      hljs.initHighlightingOnLoad();
    </script>
<meta content="width=device-width, initial-scale=1" name="viewport">
<style type="text/css">.MathJax_Hover_Frame {border-radius: .25em; -webkit-border-radius: .25em; -moz-border-radius: .25em; -khtml-border-radius: .25em; box-shadow: 0px 0px 15px #83A; -webkit-box-shadow: 0px 0px 15px #83A; -moz-box-shadow: 0px 0px 15px #83A; -khtml-box-shadow: 0px 0px 15px #83A; border: 1px solid #A6D ! important; display: inline-block; position: absolute}
.MathJax_Menu_Button .MathJax_Hover_Arrow {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 4px; -webkit-border-radius: 4px; -moz-border-radius: 4px; -khtml-border-radius: 4px; font-family: 'Courier New',Courier; font-size: 9px; color: #F0F0F0}
.MathJax_Menu_Button .MathJax_Hover_Arrow span {display: block; background-color: #AAA; border: 1px solid; border-radius: 3px; line-height: 0; padding: 4px}
.MathJax_Hover_Arrow:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_Hover_Arrow:hover span {background-color: #CCC!important}
</style><style type="text/css">#MathJax_About {position: fixed; left: 50%; width: auto; text-align: center; border: 3px outset; padding: 1em 2em; background-color: #DDDDDD; color: black; cursor: default; font-family: message-box; font-size: 120%; font-style: normal; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 15px; -webkit-border-radius: 15px; -moz-border-radius: 15px; -khtml-border-radius: 15px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_About.MathJax_MousePost {outline: none}
.MathJax_Menu {position: absolute; background-color: white; color: black; width: auto; padding: 5px 0px; border: 1px solid #CCCCCC; margin: 0; cursor: default; font: menu; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 5px; -webkit-border-radius: 5px; -moz-border-radius: 5px; -khtml-border-radius: 5px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_MenuItem {padding: 1px 2em; background: transparent}
.MathJax_MenuArrow {position: absolute; right: .5em; padding-top: .25em; color: #666666; font-size: .75em}
.MathJax_MenuActive .MathJax_MenuArrow {color: white}
.MathJax_MenuArrow.RTL {left: .5em; right: auto}
.MathJax_MenuCheck {position: absolute; left: .7em}
.MathJax_MenuCheck.RTL {right: .7em; left: auto}
.MathJax_MenuRadioCheck {position: absolute; left: .7em}
.MathJax_MenuRadioCheck.RTL {right: .7em; left: auto}
.MathJax_MenuLabel {padding: 1px 2em 3px 1.33em; font-style: italic}
.MathJax_MenuRule {border-top: 1px solid #DDDDDD; margin: 4px 3px}
.MathJax_MenuDisabled {color: GrayText}
.MathJax_MenuActive {background-color: #606872; color: white}
.MathJax_MenuDisabled:focus, .MathJax_MenuLabel:focus {background-color: #E8E8E8}
.MathJax_ContextMenu:focus {outline: none}
.MathJax_ContextMenu .MathJax_MenuItem:focus {outline: none}
#MathJax_AboutClose {top: .2em; right: .2em}
.MathJax_Menu .MathJax_MenuClose {top: -10px; left: -10px}
.MathJax_MenuClose {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; font-family: 'Courier New',Courier; font-size: 24px; color: #F0F0F0}
.MathJax_MenuClose span {display: block; background-color: #AAA; border: 1.5px solid; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; line-height: 0; padding: 8px 0 6px}
.MathJax_MenuClose:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_MenuClose:hover span {background-color: #CCC!important}
.MathJax_MenuClose:hover:focus {outline: none}
</style><style type="text/css">.MathJax_Preview .MJXf-math {color: inherit!important}
</style><style type="text/css">.MJX_Assistive_MathML {position: absolute!important; top: 0; left: 0; clip: rect(1px, 1px, 1px, 1px); padding: 1px 0 0 0!important; border: 0!important; height: 1px!important; width: 1px!important; overflow: hidden!important; display: block!important; -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none}
.MJX_Assistive_MathML.MJX_Assistive_MathML_Block {width: 100%!important}
</style><style type="text/css">#MathJax_Zoom {position: absolute; background-color: #F0F0F0; overflow: auto; display: block; z-index: 301; padding: .5em; border: 1px solid black; margin: 0; font-weight: normal; font-style: normal; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; -webkit-box-sizing: content-box; -moz-box-sizing: content-box; box-sizing: content-box; box-shadow: 5px 5px 15px #AAAAAA; -webkit-box-shadow: 5px 5px 15px #AAAAAA; -moz-box-shadow: 5px 5px 15px #AAAAAA; -khtml-box-shadow: 5px 5px 15px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_ZoomOverlay {position: absolute; left: 0; top: 0; z-index: 300; display: inline-block; width: 100%; height: 100%; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
#MathJax_ZoomFrame {position: relative; display: inline-block; height: 0; width: 0}
#MathJax_ZoomEventTrap {position: absolute; left: 0; top: 0; z-index: 302; display: inline-block; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
</style><style type="text/css">.MathJax_Preview {color: #888}
#MathJax_Message {position: fixed; left: 1em; bottom: 1.5em; background-color: #E6E6E6; border: 1px solid #959595; margin: 0px; padding: 2px 8px; z-index: 102; color: black; font-size: 80%; width: auto; white-space: nowrap}
#MathJax_MSIE_Frame {position: absolute; top: 0; left: 0; width: 0px; z-index: 101; border: 0px; margin: 0px; padding: 0px}
.MathJax_Error {color: #CC0000; font-style: italic}
</style><style type="text/css">.MJXp-script {font-size: .8em}
.MJXp-right {-webkit-transform-origin: right; -moz-transform-origin: right; -ms-transform-origin: right; -o-transform-origin: right; transform-origin: right}
.MJXp-bold {font-weight: bold}
.MJXp-italic {font-style: italic}
.MJXp-scr {font-family: MathJax_Script,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-frak {font-family: MathJax_Fraktur,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-sf {font-family: MathJax_SansSerif,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-cal {font-family: MathJax_Caligraphic,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-mono {font-family: MathJax_Typewriter,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-largeop {font-size: 150%}
.MJXp-largeop.MJXp-int {vertical-align: -.2em}
.MJXp-math {display: inline-block; line-height: 1.2; text-indent: 0; font-family: 'Times New Roman',Times,STIXGeneral,serif; white-space: nowrap; border-collapse: collapse}
.MJXp-display {display: block; text-align: center; margin: 1em 0}
.MJXp-math span {display: inline-block}
.MJXp-box {display: block!important; text-align: center}
.MJXp-box:after {content: " "}
.MJXp-rule {display: block!important; margin-top: .1em}
.MJXp-char {display: block!important}
.MJXp-mo {margin: 0 .15em}
.MJXp-mfrac {margin: 0 .125em; vertical-align: .25em}
.MJXp-denom {display: inline-table!important; width: 100%}
.MJXp-denom > * {display: table-row!important}
.MJXp-surd {vertical-align: top}
.MJXp-surd > * {display: block!important}
.MJXp-script-box > *  {display: table!important; height: 50%}
.MJXp-script-box > * > * {display: table-cell!important; vertical-align: top}
.MJXp-script-box > *:last-child > * {vertical-align: bottom}
.MJXp-script-box > * > * > * {display: block!important}
.MJXp-mphantom {visibility: hidden}
.MJXp-munderover {display: inline-table!important}
.MJXp-over {display: inline-block!important; text-align: center}
.MJXp-over > * {display: block!important}
.MJXp-munderover > * {display: table-row!important}
.MJXp-mtable {vertical-align: .25em; margin: 0 .125em}
.MJXp-mtable > * {display: inline-table!important; vertical-align: middle}
.MJXp-mtr {display: table-row!important}
.MJXp-mtd {display: table-cell!important; text-align: center; padding: .5em 0 0 .5em}
.MJXp-mtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-mlabeledtr {display: table-row!important}
.MJXp-mlabeledtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mlabeledtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-merror {background-color: #FFFF88; color: #CC0000; border: 1px solid #CC0000; padding: 1px 3px; font-style: normal; font-size: 90%}
.MJXp-scale0 {-webkit-transform: scaleX(.0); -moz-transform: scaleX(.0); -ms-transform: scaleX(.0); -o-transform: scaleX(.0); transform: scaleX(.0)}
.MJXp-scale1 {-webkit-transform: scaleX(.1); -moz-transform: scaleX(.1); -ms-transform: scaleX(.1); -o-transform: scaleX(.1); transform: scaleX(.1)}
.MJXp-scale2 {-webkit-transform: scaleX(.2); -moz-transform: scaleX(.2); -ms-transform: scaleX(.2); -o-transform: scaleX(.2); transform: scaleX(.2)}
.MJXp-scale3 {-webkit-transform: scaleX(.3); -moz-transform: scaleX(.3); -ms-transform: scaleX(.3); -o-transform: scaleX(.3); transform: scaleX(.3)}
.MJXp-scale4 {-webkit-transform: scaleX(.4); -moz-transform: scaleX(.4); -ms-transform: scaleX(.4); -o-transform: scaleX(.4); transform: scaleX(.4)}
.MJXp-scale5 {-webkit-transform: scaleX(.5); -moz-transform: scaleX(.5); -ms-transform: scaleX(.5); -o-transform: scaleX(.5); transform: scaleX(.5)}
.MJXp-scale6 {-webkit-transform: scaleX(.6); -moz-transform: scaleX(.6); -ms-transform: scaleX(.6); -o-transform: scaleX(.6); transform: scaleX(.6)}
.MJXp-scale7 {-webkit-transform: scaleX(.7); -moz-transform: scaleX(.7); -ms-transform: scaleX(.7); -o-transform: scaleX(.7); transform: scaleX(.7)}
.MJXp-scale8 {-webkit-transform: scaleX(.8); -moz-transform: scaleX(.8); -ms-transform: scaleX(.8); -o-transform: scaleX(.8); transform: scaleX(.8)}
.MJXp-scale9 {-webkit-transform: scaleX(.9); -moz-transform: scaleX(.9); -ms-transform: scaleX(.9); -o-transform: scaleX(.9); transform: scaleX(.9)}
.MathJax_PHTML .noError {vertical-align: ; font-size: 90%; text-align: left; color: black; padding: 1px 3px; border: 1px solid}
</style></head>
<body id="myPage" style="padding-top: 53px;"><div id="MathJax_Message" style="display: none;"></div>
<nav class="navbar navbar-default navbar-fixed-top" id="cs_main_navbar">
<div class="container">
<div class="navbar-header">
<button class="navbar-toggle" data-target="#catsoopnavbar" data-toggle="collapse" type="button">
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
</button>
<div class="navbar-brand"><a href="https://eecs6009.mit.edu/fall17">6.009</a></div><div class="navbar-brand"><div class="logininfo"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="https://eecs6009.mit.edu/fall17">Home</a></li><li class="breadcrumb-item-active"><a href="https://eecs6009.mit.edu/fall17/labs/lab8A">Lab 8A: <i>carlae</i></a></li></ol></div></div>
</div>
<div class="collapse navbar-collapse" id="catsoopnavbar"><ul class="nav navbar-nav navbar-right">
<li><a href="https://eecs6009.mit.edu/fall17">Homepage</a></li>
<li class="dropdown"><a aria-expanded="false" class="dropdown-toggle" data-toggle="dropdown" href="https://eecs6009.mit.edu/fall17/labs/lab8A" role="button">Information<span class="caret"></span></a><ul class="dropdown-menu">
<li><a href="https://eecs6009.mit.edu/fall17/calendar">Calendar and Handouts</a></li>
<li><a href="https://eecs6009.mit.edu/fall17/gradesheet">Grade sheet</a></li>
<li><a href="https://eecs6009.mit.edu/fall17/announcements">Archived Announcements</a></li>
<li class="divider"></li>
<li><a href="https://eecs6009.mit.edu/fall17/information">Basic Information</a></li>
<li><a href="https://eecs6009.mit.edu/fall17/schedule_staff">Schedule and Staff</a></li>
<li><a href="https://eecs6009.mit.edu/fall17/grading">Grading Policies</a></li>
<li><a href="https://eecs6009.mit.edu/fall17/collaboration">Collaboration Policy</a></li>
<li class="divider"></li>
<li><a href="https://eecs6009.mit.edu/fall17/python">Accessing/Installing Python</a></li></ul>
</li><li class="dropdown"><a aria-expanded="false" class="dropdown-toggle" data-toggle="dropdown" href="https://eecs6009.mit.edu/fall17/labs/lab8A" role="button">Quizzes<span class="caret"></span></a><ul class="dropdown-menu">
<li><a href="https://eecs6009.mit.edu/fall17/quizzes/q1_practice"> Quiz 1 Practice Quiz</a></li>
<li><a href="https://eecs6009.mit.edu/fall17/quizzes/q1_problems"> Quiz 1 Practice Problems</a></li>
<li><a href="https://eecs6009.mit.edu/fall17/quizzes/quiz1"> Quiz 1</a></li>
<li class="divider"></li>
<li><a href="https://eecs6009.mit.edu/fall17/quizzes/q2_practice"> Quiz 2 Practice Quiz</a></li>
<li><a href="https://eecs6009.mit.edu/fall17/quizzes/q2_problems"> Quiz 2 Practice Problems</a></li>
<li><a href="https://eecs6009.mit.edu/fall17/quizzes/quiz2"> Quiz 2</a></li>
<li><a href="https://eecs6009.mit.edu/fall17/quizzes/quiz2_resubmit"> Quiz 2 Resubmit</a></li>
<li><a href="https://eecs6009.mit.edu/fall17/quizzes/quiz2_makeup/rooms"> Quiz 2 Makeup Room Signup</a></li>
<li><a href="https://eecs6009.mit.edu/fall17/quizzes/quiz2_makeup"> Quiz 2 Makeup</a></li>
<li><a href="https://eecs6009.mit.edu/fall17/quizzes/quiz2_makeup_resubmit"> Quiz 2 Makeup Resubmit</a></li></ul>
</li><li class="dropdown"><a aria-expanded="false" class="dropdown-toggle" data-toggle="dropdown" href="https://eecs6009.mit.edu/fall17/labs/lab8A" role="button">Labs<span class="caret"></span></a><ul class="dropdown-menu">
<li><a href="https://eecs6009.mit.edu/fall17/labs/lab1">Lab 1</a></li>
<li><a href="https://eecs6009.mit.edu/fall17/labs/lab2">Lab 2</a></li>
<li><a href="https://eecs6009.mit.edu/fall17/labs/lab3">Lab 3</a></li>
<li><a href="https://eecs6009.mit.edu/fall17/labs/lab4">Lab 4</a></li>
<li><a href="https://eecs6009.mit.edu/fall17/labs/lab5">Lab 5</a></li>
<li><a href="https://eecs6009.mit.edu/fall17/labs/lab6">Lab 6</a></li>
<li><a href="https://eecs6009.mit.edu/fall17/labs/lab7">Lab 7</a></li>
<li><a href="https://eecs6009.mit.edu/fall17/labs/lab8A">Lab 8A</a></li></ul>
</li><li class="dropdown"><a aria-expanded="false" class="dropdown-toggle" data-toggle="dropdown" href="https://eecs6009.mit.edu/fall17/labs/lab8A" role="button">Help<span class="caret"></span></a><ul class="dropdown-menu">
<li><a href="https://piazza.com/mit/fall17/6009">Piazza</a></li>
<li><a href="https://eecs6009.mit.edu/fall17/queue">Help Queue</a></li>
<li><a href="https://eecs6009.mit.edu/fall17/otherhelp">Other Help</a></li></ul>
</li><li><a href="https://eecs6009.mit.edu/fall17/labs/lab8A?loginaction=logout">Log Out</a></li></ul></div>
</div>
</nav>
<div id="content">
<center>
<h1>Lab 8A: <i>carlae</i></h1>
</center>
<div class="container">
<div class="row">
<div class="col-md-1"></div>
<div class="col-md-10">
<div id="page_content"><center>The questions below are due on Monday November 13, 2017; 10:00:00 PM.<br><hr><br></center><h2>Table of Contents</h2><ul><li><a href="https://eecs6009.mit.edu/fall17/labs/lab8A#catsoop_section_1">1) Timing</a></li><li><a href="https://eecs6009.mit.edu/fall17/labs/lab8A#catsoop_section_2">2) Preparation</a></li><li><a href="https://eecs6009.mit.edu/fall17/labs/lab8A#catsoop_section_3">3) Introduction</a></li><ul><li><a href="https://eecs6009.mit.edu/fall17/labs/lab8A#catsoop_section_3_1">3.1) LISP and <em>carlae</em></a></li></ul><li><a href="https://eecs6009.mit.edu/fall17/labs/lab8A#catsoop_section_4">4) Interpreter Design</a></li><li><a href="https://eecs6009.mit.edu/fall17/labs/lab8A#catsoop_section_5">5) Lexer (Tokenizer)</a></li><li><a href="https://eecs6009.mit.edu/fall17/labs/lab8A#catsoop_section_6">6) Parser</a></li><li><a href="https://eecs6009.mit.edu/fall17/labs/lab8A#catsoop_section_7">7) Evaluator</a></li><ul><li><a href="https://eecs6009.mit.edu/fall17/labs/lab8A#catsoop_section_7_1">7.1)  Evaluator 1: Calculator</a></li><ul><li><a href="https://eecs6009.mit.edu/fall17/labs/lab8A#catsoop_section_7_1_1">7.1.1) Testing Your Code: REPL</a></li></ul><li><a href="https://eecs6009.mit.edu/fall17/labs/lab8A#catsoop_section_7_2">7.2) Additional Operations</a></li><li><a href="https://eecs6009.mit.edu/fall17/labs/lab8A#catsoop_section_7_3">7.3) Evaluator 2: Variables</a></li><li><a href="https://eecs6009.mit.edu/fall17/labs/lab8A#catsoop_section_7_4">7.4) Environments</a></li><ul><li><a href="https://eecs6009.mit.edu/fall17/labs/lab8A#catsoop_section_7_4_1">7.4.1) Environments: Example</a></li><li><a href="https://eecs6009.mit.edu/fall17/labs/lab8A#catsoop_section_7_4_2">7.4.2) Environments: Initial Structure</a></li></ul><li><a href="https://eecs6009.mit.edu/fall17/labs/lab8A#catsoop_section_7_5">7.5) Evaluator Changes</a></li><li><a href="https://eecs6009.mit.edu/fall17/labs/lab8A#catsoop_section_7_6">7.6) Evaluator 3: Functions</a></li><ul><li><a href="https://eecs6009.mit.edu/fall17/labs/lab8A#catsoop_section_7_6_1">7.6.1) Defining functions</a></li><li><a href="https://eecs6009.mit.edu/fall17/labs/lab8A#catsoop_section_7_6_2">7.6.2) Calling Functions</a></li><li><a href="https://eecs6009.mit.edu/fall17/labs/lab8A#catsoop_section_7_6_3" id="catsoop_label_function_examples" label="function_examples">7.6.3) Examples</a></li><li><a href="https://eecs6009.mit.edu/fall17/labs/lab8A#catsoop_section_7_6_4">7.6.4) Changes to <code>evaluate</code></a></li><li><a href="https://eecs6009.mit.edu/fall17/labs/lab8A#catsoop_section_7_6_5">7.6.5) Easier Function Definitions</a></li></ul></ul><li><a href="https://eecs6009.mit.edu/fall17/labs/lab8A#catsoop_section_8">8) Endnotes</a></li><li><a href="https://eecs6009.mit.edu/fall17/labs/lab8A#catsoop_section_9">9) Code Submission</a></li><li><a href="https://eecs6009.mit.edu/fall17/labs/lab8A#catsoop_section_10">10) Checkoff</a></li><ul><li><a href="https://eecs6009.mit.edu/fall17/labs/lab8A#catsoop_section_10_1">10.1) Grade</a></li></ul></ul><a name="catsoop_section_1"></a><h2>1) Timing</h2>
<p>This lab is part 1 of a two-week lab, which will be completed next week.  Due
dates for this part are:</p>
<ul>
<li><em>Code submission and concept questions</em>: Monday, 13 November, 10pm</li>
<li><em>Checkoff</em>: Friday, 17 November, 5pm</li>
</ul>
<a name="catsoop_section_2"></a><h2>2) Preparation</h2>
<p>This lab assumes you have Python 3.5 or later installed on your machine.</p>
<p>The following file contains code and other resources as a starting point for
this lab: <a download="lab8A.zip" href="https://eecs6009.mit.edu/fall17/lab_distribution.zip?path=%5B%22fall17%22%2C+%22labs%22%2C+%22lab8A%22%5D"><tt>lab8A.zip</tt></a></p>
<p>Most of your changes should be made to <code>lab.py</code>, which you will submit
at the end of this lab.  Importantly, you should not add any imports
to the file.  You may submit portions of the lab late (see the
<a href="https://eecs6009.mit.edu/fall17/grading">grading page</a> for more details), but the last day to
submit this lab will be the Friday after the due date.</p>
<p>This lab is worth a total of 4 points.  Your score for the lab is based on:</p>
<ul>
<li>correctly answering the questions throughout this page (0.5 points)</li>
<li>passing the test cases from <code>test.py</code> under the time limit (1 points), and</li>
<li>a brief "checkoff" conversation with a staff member to discuss your code (2.5
    points).</li>
</ul>
<p>Please also review the <a href="https://eecs6009.mit.edu/fall17/collaboration">collaboration policy</a> before
continuing.  In particular, <strong>note that you are not allowed to use any code
other than that which you have written yourself, including code you find
online.</strong></p>
<a name="catsoop_section_3"></a><h2>3) Introduction</h2>
<p>In this lab, you will implement an interpreter for a dialect of
<a href="https://en.wikipedia.org/wiki/Lisp_%28programming_language%29" target="_blank">LISP</a>,
one of the earliest high-level programming languages (it was invented by John
McCarthy at MIT in 1958!).  Because this language will in some ways be quite
small compared to Python, we'll call it <em>carlae</em>, after
<a href="https://en.wikipedia.org/wiki/Barbados_threadsnake" target="_blank"><i>Leptotyphlops carlae</i></a>.</p>
<p>Its syntax is simpler than Python's, and the complete interpreter will fit in a
single Python file.  However, despite its small size, the language we will
implement here will be
<a href="https://en.wikipedia.org/wiki/Turing_completeness" target="_blank">Turing complete</a>,
i.e., in theory, it will be able to solve any possible computational problem
(so it would be possible, for example, to write <em>carlae</em> implementations of any of
the labs we have done so far in 6.009).</p>
<p><a name="catsoop_section_3_1"></a></p><h3>3.1) LISP and <em>carlae</em></h3><p></p>
<p>As with most LISP dialects, the syntax of <em>carlae</em> is far simpler than that of
Python.  All-in-all, we can define the syntax of <em>carlae</em> as follows:</p>
<ul>
<li>Numbers (e.g. <code>1</code>) and symbols (e.g. <code>x</code>) are called <em>atomic expressions</em>;
    they cannot be broken into pieces. These are similar to their Python
    counterparts, except that in <em>carlae</em>, operators such as <code>+</code> and <code>&gt;</code> are
    symbols, too, and are treated the same way as <code>x</code> and <code>fib</code>.</li>
<li>Everything else is an <a href="https://en.wikipedia.org/wiki/S-expression" target="_blank">S-expression</a>:
    an opening round bracket <code>(</code>, followed by zero or more expressions,
    followed by a closing round bracket <code>)</code>. The first subexpression determines
    what it means:<ul>
<li>An S-expression starting with a keyword, e.g. <code>(if ...)</code>, is a <em>special
    form</em>; the meaning depends on the keyword.</li>
<li>An S-expression starting with a non-keyword, e.g. <code>(fn ...)</code>, is a
    function call, where the first element in the expression is the function
    to be called, and the remaining subexpressions represent the arguments to
    that function.</li>
</ul>
</li>
</ul>
<p>And that's it!  The whole syntax is described by the three bullet points above.
For example, consider the following definition of a function that computes
Fibonacci numbers in Python:</p>
<pre><code class="py hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">fib</span><span class="hljs-params">(n)</span>:</span>
    <span class="hljs-keyword">if</span> n &lt;= <span class="hljs-number">1</span>:
        <span class="hljs-keyword">return</span> n
    <span class="hljs-keyword">return</span> fib(n<span class="hljs-number">-1</span>) + fib(n<span class="hljs-number">-2</span>)
</code></pre>
<p>We could write an equivalent program in <em>carlae</em>:</p>
<pre><code class="nohighlight">(define fib
  (lambda (n)
    (if (&lt;= n 1)
      n
      (+ (fib (- n 1)) (fib (- n 2)))
    )
  )
)
</code></pre>
<p>Using so many parentheses might take some getting used to, but it helps to keep
the language simple and consistent.  Some people have joked that LISP stands
for "Lots of Insipid and Silly Parentheses," though some might argue instead
that it stands for "Lisp Is Syntactically Pure." <code>:)</code></p>
<p></p><center>
<img src="./Lab 8A_files/lisp_cycles.png"><br><small>from <a href="https://xkcd.com/297/" target="_blank">XKCD</a></small>
</center><p></p>
<a name="catsoop_section_4"></a><h2>4) Interpreter Design</h2>
<p>Despite its small size, the interpreter for <em>carlae</em> will still be rather
complicated.  To help manage this complexity, we'll start with a very small
language, and we'll gradually add functionality until we have a fully featured
language.  As with most interpreters, we will think of our <em>carlae</em> interpreter
as consisting of three parts:</p>
<ul>
<li>A <em>lexer</em>, which takes a string as input and produces a list of <em>tokens</em>,
    which represent meaningful units in the programming language.</li>
<li>A <em>parser</em>, which takes the output of the lexer as input and produces a
    structured representation of the program as its output.</li>
<li>An <em>evaluator</em>, which takes the output of the parser as input and actually
    handles running the program.</li>
</ul>
<a name="catsoop_section_5"></a><h2>5) Lexer (Tokenizer)</h2>
<p>Our first job is <em>lexing</em> (or <em>tokenizing</em>).  In <em>carlae</em>, we'll have exactly
three kinds of tokens: opening round brackets <code>(</code>, closing round brackets <code>)</code>,
and everything else (separated by whitespace).  Your first task for the lab is
to write a function called <code>tokenize</code>, which takes a single string representing
a program as its input and outputs a list of tokens.  For example, calling
<code>tokenize("(foo (bar 3.14))")</code> should give us the following result: <code>['(',
'foo', '(', 'bar', '3.14', ')', ')']</code></p>
<p>Unlike in Python, whitespace does not matter, so, for example, the <code>tokenize</code>
function should produce exactly the same output for both of the following
programs:</p>
<pre><code class="nohighlight">(define circle-area
  (lambda (r)
    (* 3.14 (* r r))
  )
)
</code></pre>
<pre><code class="nohighlight">(define circle-area (lambda (r) (* 3.14 (* r r))))
</code></pre>
<p>Your <code>tokenize</code> function should also handle comments.  A comment in <em>carlae</em> is
prefixed with a semicolon (<code>;</code>), instead of the octothorpe (<code>#</code>) used by
Python.  If a line contains a semicolon, the <code>tokenize</code> function should not
consider that semicolon or the characters that follow it on that line to be
part of the input program.</p>
<p>
<!--START question q000000 -->
</p><div class="question question-pythonic" id="cs_qdiv_q000000" style="position: static">
<div id="q000000_rendered_question">
What should be the result of <code>tokenize("(cat (dog (tomato)))")</code>?<br><input id="q000000" name="q000000" size="50" type="text" value="[&#39;(&#39;, &#39;cat&#39;, &#39;(&#39;, &#39;dog&#39;, &#39;(&#39;, &#39;tomato&#39;, &#39;)&#39;, &#39;)&#39;, &#39;)&#39;]">
</div><div>
<span id="q000000_buttons">
<button class="submit btn btn-catsoop" id="q000000_submit" onclick="catsoop.submit(&#39;q000000&#39;);" style="margin-top: 10px;">Submit</button></span>
<span id="q000000_loading" style="display:none;"><img src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="></span>
<span id="q000000_score_display"></span>
<div class="nsubmits_left" id="q000000_nsubmits_left">You have submitted this assignment 1 time.</div></div>
<div id="q000000_solution_container">
<div id="q000000_solution">
</div>
<div id="q000000_solution_explanation">
</div>
</div>
<div id="q000000_message">
<script type="text/javascript">$("#q000000_score_display").html('');</script>
<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAMAAADzapwJAAABQVBMVEUAAAAGDQAAAAAAAAAAAAAAAAAAAACGqlBIfBNciiZGeg9Eeg5Feg5Gew9CdgpCdgxDehJvmDN1nj9plTVWhRtOgRlMfxZjkS5Geg9EeA5Geg5HfBBHew5GeQ5Cdg1CeAxDegtHgACVtmV+pURPgBp4oEBEeQx+o0p8oklFeg5YiCJIfRFEdQ5GehBHeg9CdwtEdQxEeg5Fdw5DeQ1Eegs2YQlCdwpCeAxDeQ0PHgBGdA9AdgkAAAAAAAARIgChwGKPs0qjwXKStUyFqD6CqDfJ3p+91Ji00XqlwmypyGihwGiauluWtlicwFKXulGTuEmMr0WOs0OKr0CGrDuEqjrR46zC2Ji+1ZC804640oK1z4CxzHywynqsx3enw3WYuWidvF+fwlqgxFePsFWSs1KIrE2Wu0uOr0qGqkeCpj50nDHRgoCJAAAAP3RSTlMABA0HEgoQ/ff17+jbxi8nDvz39vb29fTy7dPQoJeLVRUJ/f39+vn49/f118jAvrKWcW9jWllJQjkiIRwZFg8RajNxAAAA+klEQVQY06XQ1bLCMBAGYNJCHXfnuLtrFXc5gru+/wMQhhZouWRvMvNt/kx2dbvUC+V/3tY9OhZzX5i0HDqNxn/aRo2aXb/JXtR+p2HjfjUb5xmg1kfyL9v9d76q1UK1kqPaSWAFy1TQVs+zvCci4wd9fA8PE9HM5Rvkg5JlcJ68iuh8OFtkcb/ywrUtlUscUTfniaKQIlaj0AdsoZTuH2aEUsceXM/AuNNcmcsIZW7otWwsIuCacBVJqgycYdWPwx7rWJQKVu0y3n0OUZyemVUIAPp9S8wcIQRBDCgAsqIGBNM/eS/fPr/02KKx5IXDBixsfV2OwCYERebVjyGAvqhE3QAAAABJRU5ErkJggg=="><br></div>
</div>
<!--END question q000000 -->
<p></p>
<p>
<!--START question tokenize2 -->
</p><div class="question question-pythonic" id="cs_qdiv_tokenize2" style="position: static">
<div id="tokenize2_rendered_question">
What should be the result of tokenizing the following expression?
<pre><code class="nohighlight">;add the numbers 2 and 3
(+ ; this expression
 2     ; spans multiple
 3  ; lines

)
</code></pre>
<p><br></p><input id="tokenize2" name="tokenize2" size="50" type="text" value="">
</div><div>
<span id="tokenize2_buttons">
<button class="submit btn btn-catsoop" id="tokenize2_submit" onclick="catsoop.submit(&#39;tokenize2&#39;);" style="margin-top: 10px;">Submit</button></span>
<span id="tokenize2_loading" style="display:none;"><img src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="></span>
<span id="tokenize2_score_display"></span>
<div class="nsubmits_left" id="tokenize2_nsubmits_left">You have submitted this assignment 0 times.</div></div>
<div id="tokenize2_solution_container">
<div id="tokenize2_solution">
</div>
<div id="tokenize2_solution_explanation">
</div>
</div>
<div id="tokenize2_message"></div>
</div>
<!--END question tokenize2 -->
<p></p>
<a name="catsoop_section_6"></a><h2>6) Parser</h2>
<p>Our next job is <em>parsing</em> the list of tokens into an <em>abstract syntax tree</em>, a
structured representation of the expression to be evaluated.  Implement the
<code>parse</code> function in <code>lab.py</code>.  <code>parse</code> should take a single input (a list of
tokens as produced by <code>tokenize</code>) and should output a representation of the
expression, where:</p>
<ul>
<li>A number is represented as an instance of <code>int</code> or <code>float</code>.</li>
<li>A symbol is represented as a string.</li>
<li>An S-expression is represented as a list of its parsed subexpressions.</li>
</ul>
<p>For example, the program above that defined <code>circle-area</code> should parse as
follows:</p>
<pre><code class="nohighlight">['define', 'circle-area', ['lambda', ['r'], ['*', 3.14, ['*', 'r', 'r']]]]
</code></pre>
<p>Note that the structure of the parser's output is such that a recursive
solution is likely the "path of least resistance" (parsing an expression often
involves recursively parsing subexpressions).</p>
<p><strong>Your code for <code>parse</code> should not use Python's built-in <code>eval</code> function.</strong></p>
<p>In the case that parentheses are mismatched in the input, the function should
raise a <code>SyntaxError</code>.</p>
<p>After implementing both <code>tokenize</code> and <code>parse</code>, your code should pass the
<code>Test1_Parse</code> suite in <code>test.py</code></p>
<p>
<!--START question q000001 -->
</p><div class="question question-pythonic" id="cs_qdiv_q000001" style="position: static">
<div id="q000001_rendered_question">
What should be the result of calling <code>parse</code> on the output from the first concept question above?<br><input id="q000001" name="q000001" size="50" type="text" value="">
</div><div>
<span id="q000001_buttons">
<button class="submit btn btn-catsoop" id="q000001_submit" onclick="catsoop.submit(&#39;q000001&#39;);" style="margin-top: 10px;">Submit</button></span>
<span id="q000001_loading" style="display:none;"><img src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="></span>
<span id="q000001_score_display"></span>
<div class="nsubmits_left" id="q000001_nsubmits_left">You have submitted this assignment 0 times.</div></div>
<div id="q000001_solution_container">
<div id="q000001_solution">
</div>
<div id="q000001_solution_explanation">
</div>
</div>
<div id="q000001_message"></div>
</div>
<!--END question q000001 -->
<p></p>
<p>
<!--START question parse2 -->
</p><div class="question question-pythonic" id="cs_qdiv_parse2" style="position: static">
<div id="parse2_rendered_question">
What should be the result of calling <code>parse(['2'])</code>?<br><input id="parse2" name="parse2" size="50" type="text" value="">
</div><div>
<span id="parse2_buttons">
<button class="submit btn btn-catsoop" id="parse2_submit" onclick="catsoop.submit(&#39;parse2&#39;);" style="margin-top: 10px;">Submit</button></span>
<span id="parse2_loading" style="display:none;"><img src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="></span>
<span id="parse2_score_display"></span>
<div class="nsubmits_left" id="parse2_nsubmits_left">You have submitted this assignment 0 times.</div></div>
<div id="parse2_solution_container">
<div id="parse2_solution">
</div>
<div id="parse2_solution_explanation">
</div>
</div>
<div id="parse2_message"></div>
</div>
<!--END question parse2 -->
<p></p>
<p>
<!--START question parse3 -->
</p><div class="question question-pythonic" id="cs_qdiv_parse3" style="position: static">
<div id="parse3_rendered_question">
What should be the result of calling <code>parse(['x'])</code>?<br><input id="parse3" name="parse3" size="50" type="text" value="">
</div><div>
<span id="parse3_buttons">
<button class="submit btn btn-catsoop" id="parse3_submit" onclick="catsoop.submit(&#39;parse3&#39;);" style="margin-top: 10px;">Submit</button></span>
<span id="parse3_loading" style="display:none;"><img src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="></span>
<span id="parse3_score_display"></span>
<div class="nsubmits_left" id="parse3_nsubmits_left">You have submitted this assignment 0 times.</div></div>
<div id="parse3_solution_container">
<div id="parse3_solution">
</div>
<div id="parse3_solution_explanation">
</div>
</div>
<div id="parse3_message"></div>
</div>
<!--END question parse3 -->
<p></p>
<p>
<!--START question parse4 -->
</p><div class="question question-pythonic" id="cs_qdiv_parse4" style="position: static">
<div id="parse4_rendered_question">
What should be the result of calling <code>parse(['(', '+', '2', '(', '-', '5', '3', ')', '7', '8', ')'])</code>?<br><input id="parse4" name="parse4" size="50" type="text" value="">
</div><div>
<span id="parse4_buttons">
<button class="submit btn btn-catsoop" id="parse4_submit" onclick="catsoop.submit(&#39;parse4&#39;);" style="margin-top: 10px;">Submit</button></span>
<span id="parse4_loading" style="display:none;"><img src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="></span>
<span id="parse4_score_display"></span>
<div class="nsubmits_left" id="parse4_nsubmits_left">You have submitted this assignment 0 times.</div></div>
<div id="parse4_solution_container">
<div id="parse4_solution">
</div>
<div id="parse4_solution_explanation">
</div>
</div>
<div id="parse4_message"></div>
</div>
<!--END question parse4 -->
<p></p>
<a name="catsoop_section_7"></a><h2>7) Evaluator</h2>
<blockquote>
<i>"How do you eat a big pizza?  One little bite at at time..."</i><br>
-Anonymous
</blockquote>
<p>Now that we have the program in a form that is (relatively) easy to work with,
we can move on to implementing the <em>evaluator</em>, which will handle actually
running the program.  This part of the interpreter will get fairly complicated,
so we will start small and add in more pieces later.  We will make several
"false steps" along the way, where we'll need to make modifications to pieces
we had implemented earlier.</p>
<p><strong>Because of this, it will be important to save backups of your <code>lab.py</code> file
after every major modification (or to use a version control system such as
Mercurial or Git), so that if something goes wrong, you can revert to a working
copy.</strong></p>
<p><a name="catsoop_section_7_1"></a></p><h3>7.1)  Evaluator 1: Calculator</h3><p></p>
<p>We'll hold off on implementing variables, lists, conditionals, and functions
for a little while; for now, we'll start by implementing a small calculator
that can handle the <code>+</code> and <code>-</code> operations.</p>
<p>Note that we have provided a dictionary called <code>carlae_builtins</code> in <code>lab.py</code>,
which maps the names <code>+</code> and <code>-</code> to functions.  Each of these functions takes a
list as an argument and returns the appropriate value.</p>
<p>Define a function <code>evaluate</code>, which takes as its sole input an expression of
the same form as the parser's output.  <code>evaluate</code> should return the value of
the expression:</p>
<ul>
<li>If the expression is a symbol of a name in <code>carlae_builtins</code>, it should
    return the associated object.</li>
<li>If the expression is a number, it should return that number.</li>
<li>If the expression is a list (representing an S-expression), each of the
    elements in the list should be evaluated, and the result of evaluating the
    first element (a function) should be called with the remaining elements
    passed in.  The overall result of evaluating such a function is the return
    value of that function call.</li>
<li>If the expression is a symbol that is not in <code>carlae_builtins</code>, or is a list
    whose first element is not a function, it should raise an <code>EvaluationError</code>
    exception.</li>
</ul>
<p>Implement the <code>evaluate</code> function in <code>lab.py</code> according to the rules above.</p>
<p><a name="catsoop_section_7_1_1"></a></p><h4>7.1.1) Testing Your Code: REPL</h4><p></p>
<p>It is kind of a pain to have to type out all of the arguments to <code>evaluate</code>
each time we call it.</p>
<p>As such, we'll implement a REPL (a "<strong>R</strong>ead, <strong>E</strong>valuate, <strong>P</strong>rint
<strong>L</strong>oop") for <em>carlae</em>.  A REPL has a simple job: it continually prompts the
user for input until they type <code>QUIT</code>.  Until then, it:</p>
<ul>
<li>accepts input from the user,</li>
<li>tokenizes and parses it,</li>
<li>evaluates it, and</li>
<li>prints the result.</li>
</ul>
<p>If an error occurs during any of these steps, an error message should be
displayed, and that expression may be ignored, but the program should not exit.</p>
<p>To implement the REPL, we can make use of Python's built-in <code>input</code> function.
<code>input</code> takes an argument representing a prompt to be displayed to the user and
returns the string that they type (it is returned when they hit enter).</p>
<p>The following shows one possible interaction with a REPL, with a particular
prompt and output formatting (you are welcome to use whatever formatting you
like!):</p>
<pre><code class="nohighlight">in&gt; (+ 2 3)
  out&gt; 5

in&gt; (+ 2 (- 3 4))
  out&gt; 1

in&gt; (- 3.14 1.14 1)
  out&gt; 1.0000000000000004

in&gt; (+ 2 (- 3 4 5))
  out&gt; -4

in&gt; QUIT
</code></pre>
<p>Implement a REPL for <em>carlae</em> and use it to test your evaluator.  <strong>The REPL
can/should be one of your main means of testing moving forward</strong>; feel free to
try things out using the REPL as you work through the remainder of the lab.
The functionality of your REPL will not be tested automatically; rather, it
will be tested during the checkoff.  The REPL should only start when the lab is
run directly, not when <code>lab.py</code> is imported from another script.</p>
<p><a name="catsoop_section_7_2"></a></p><h3>7.2) Additional Operations</h3><p></p>
<p>Implement two new operations: <code>*</code> and <code>/</code>:</p>
<ul>
<li><code>*</code> should take arbitrarily-many arguments and should return the product of
    all its arguments.</li>
<li><code>/</code> should take arbitrarily many arguments.  It should return the result of
    successively dividing the first argument by the remaining arguments.</li>
</ul>
<p>After implementing the evaluator and the <code>*</code> and <code>/</code> operations, try them out
in the REPL.</p>
<p><a name="catsoop_section_7_3"></a></p><h3>7.3) Evaluator 2: Variables</h3><p></p>
<p>Next, we will implement our first special form: <em>variable definition</em> using the
<code>define</code> keyword.</p>
<p>A variable definition has the following syntax: <code>(define NAME EXPR)</code>, where
<code>NAME</code> is a symbol and <code>EXPR</code> is an arbitrary expression.  When <em>carlae</em>
evaluates a <code>define</code> expression, it should associate the name <code>NAME</code> with the
value that results from evaluating <code>EXPR</code>.  In addition, the <code>define</code>
expression should evaluate to the result of evaluating <code>EXPR</code>.</p>
<p>The following transcript shows an example interaction using the <code>define</code>
keyword:</p>
<pre><code class="nohighlight">in&gt; (define pi 3.14)
  out&gt; 3.14

in&gt; (define radius 2)
  out&gt; 2

in&gt; (* pi radius radius)
  out&gt; 12.56

in&gt; QUIT
</code></pre>
<p>Note that <code>define</code> differs from the function calls we saw earlier.  It is a
<em>special form</em> that does not evaluate the name that follows it; it only
evaluates the expression that follows the name.  As such, we will have to treat
it differently from a normal function call.</p>
<p>In addition, in order to think about how to implement <code>define</code>, we will need to
talk about the notion of <em>environments</em>.</p>
<p><a name="catsoop_section_7_4"></a></p><h3>7.4) Environments</h3><p></p>
<p>Admitting variable definition into our language means that we need to be, in
some sense, more careful with the process by which expressions are evaluated.
We will handle the complexity associated with variable definition by
maintaining structures called <em>environments</em>.  An environment consists of
bindings from variable names to values, and possibly a parent environment, from
which other bindings are inherited.  One can look up a name in an environment,
and one can bind names to values in an environment.</p>
<p>The environment is crucial to the evaluation process, because it determines the
context in which an expression should be evaluated.  Indeed, one could say that
expressions in a programming language do not, in themselves, have any meaning.
Rather, an expression acquires a meaning only with respect to some environment
in which it is evaluated.  Even the interpretation of an expression as
straightforward as <code>(+ 1 1)</code> depends on an understanding that one is operating
in a context in which + is the symbol for addition.  Thus, in our model of
evaluation we will always speak of evaluating an expression <em>with respect to
some environment</em>.</p>
<p>To describe interactions with the interpreter, we will suppose that there is a
"global" environment, consisting of bindings of the names of built-in functions
and constants to their associated values.  For example, the idea that <code>+</code> is
the symbol for addition is captured by saying that the symbol <code>+</code> is bound in
this global environment to the primitive addition procedure we defined above.</p>
<p>One necessary operation on environments is looking up the value to which a
given name is bound.  To do this, we can follow these steps:</p>
<ul>
<li>If the name has a binding in the environment, that value is returned.</li>
<li>If the name does not have a binding in the environment and the environment
    has a parent, we look up the name in the parent environment (following these
    same steps).</li>
<li>If the name does not have a binding in the environment and the environment
    does not have a parent, an <code>EvaluationError</code> is raised.</li>
</ul>
<p>Note that looking up a name in an environment is similar to looking up a key in
a dictionary, except that if the key is not found, we continue looking in
parent environments until we find the key or we run out of parents to look in.</p>
<p>In order to make variables work properly, you will need to implement the kind
of lookup described above in Python.  It is up to you to decide how to
implement environments and the associated lookups; your implementation will not
be tested directly by the automatic checker, but rather will be tested by
looking at the end-to-end behavior of your evaluator.  Regardless of how you
implement environments, <strong>you should make sure your environment representation
can handle variables with arbitrary names</strong>, and you should be prepared to
discuss your implementation during the checkoff.</p>
<p><a name="catsoop_section_7_4_1"></a></p><h4>7.4.1) Environments: Example</h4><p></p>
<p>The following shows an example of an environment structure, where arrows
indicate each environment's parent, if any.  Here we have four environments,
labeled <strong>E1</strong>, <strong>E2</strong>, <strong>E3</strong>, and <strong>E4</strong>.  Both <strong>E2</strong> and <strong>E3</strong> have <strong>E1</strong>
as a parent environment, and <strong>E4</strong> has <strong>E3</strong> as a parent environment.  <strong>E1</strong>
does not have a parent environment.</p>
<p></p><center>
<img src="./Lab 8A_files/env1.png" style="width: 3in">
</center><p></p>
<p>We say that the values <code>x</code>, <code>y</code>, and <code>z</code> are <em>bound</em> in <strong>E1</strong>.  Note that <code>x</code>
and <code>y</code> are bound in <strong>E2</strong>; <code>x</code> is bound in <strong>E3</strong>, and <code>a</code> is bound in
<strong>E4</strong>.  Looking up a name, we work our way up the arrows until we find the
name we are looking for.  For example, looking up <code>a</code> in <strong>E4</strong> gives us the
value <code>1</code>, and looking up <code>z</code> in <strong>E4</strong> gives us <code>5</code>.</p>
<p>Notice that, as was mentioned above, the evnrionment is crucial for determining
the result of an expression.</p>
<p>
<!--START question q000002 -->
</p><div class="question question-pythonic" id="cs_qdiv_q000002" style="position: static">
<div id="q000002_rendered_question">
What is the result of evaluating <code>x</code> in <strong>E1</strong>?<br><input id="q000002" name="q000002" size="50" type="text" value="">
</div><div>
<span id="q000002_buttons">
<button class="submit btn btn-catsoop" id="q000002_submit" onclick="catsoop.submit(&#39;q000002&#39;);" style="margin-top: 10px;">Submit</button></span>
<span id="q000002_loading" style="display:none;"><img src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="></span>
<span id="q000002_score_display"></span>
<div class="nsubmits_left" id="q000002_nsubmits_left">You have submitted this assignment 0 times.</div></div>
<div id="q000002_solution_container">
<div id="q000002_solution">
</div>
<div id="q000002_solution_explanation">
</div>
</div>
<div id="q000002_message"></div>
</div>
<!--END question q000002 -->
<p></p>
<p>
<!--START question q000003 -->
</p><div class="question question-pythonic" id="cs_qdiv_q000003" style="position: static">
<div id="q000003_rendered_question">
What is the result of evaluating <code>x</code> in <strong>E2</strong>?<br><input id="q000003" name="q000003" size="50" type="text" value="">
</div><div>
<span id="q000003_buttons">
<button class="submit btn btn-catsoop" id="q000003_submit" onclick="catsoop.submit(&#39;q000003&#39;);" style="margin-top: 10px;">Submit</button></span>
<span id="q000003_loading" style="display:none;"><img src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="></span>
<span id="q000003_score_display"></span>
<div class="nsubmits_left" id="q000003_nsubmits_left">You have submitted this assignment 0 times.</div></div>
<div id="q000003_solution_container">
<div id="q000003_solution">
</div>
<div id="q000003_solution_explanation">
</div>
</div>
<div id="q000003_message"></div>
</div>
<!--END question q000003 -->
<p></p>
<p>
<!--START question q000004 -->
</p><div class="question question-pythonic" id="cs_qdiv_q000004" style="position: static">
<div id="q000004_rendered_question">
What is the result of evaluating <code>x</code> in <strong>E3</strong>?<br><input id="q000004" name="q000004" size="50" type="text" value="">
</div><div>
<span id="q000004_buttons">
<button class="submit btn btn-catsoop" id="q000004_submit" onclick="catsoop.submit(&#39;q000004&#39;);" style="margin-top: 10px;">Submit</button></span>
<span id="q000004_loading" style="display:none;"><img src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="></span>
<span id="q000004_score_display"></span>
<div class="nsubmits_left" id="q000004_nsubmits_left">You have submitted this assignment 0 times.</div></div>
<div id="q000004_solution_container">
<div id="q000004_solution">
</div>
<div id="q000004_solution_explanation">
</div>
</div>
<div id="q000004_message"></div>
</div>
<!--END question q000004 -->
<p></p>
<p>
<!--START question q000005 -->
</p><div class="question question-pythonic" id="cs_qdiv_q000005" style="position: static">
<div id="q000005_rendered_question">
What is the result of evaluating <code>x</code> in <strong>E4</strong>?<br><input id="q000005" name="q000005" size="50" type="text" value="">
</div><div>
<span id="q000005_buttons">
<button class="submit btn btn-catsoop" id="q000005_submit" onclick="catsoop.submit(&#39;q000005&#39;);" style="margin-top: 10px;">Submit</button></span>
<span id="q000005_loading" style="display:none;"><img src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="></span>
<span id="q000005_score_display"></span>
<div class="nsubmits_left" id="q000005_nsubmits_left">You have submitted this assignment 0 times.</div></div>
<div id="q000005_solution_container">
<div id="q000005_solution">
</div>
<div id="q000005_solution_explanation">
</div>
</div>
<div id="q000005_message"></div>
</div>
<!--END question q000005 -->
<p></p>
<p>Also note that the <code>define</code> keyword always operates directly on the environment
in which it is evaluated.  If we were to evaluate <code>(define y 8)</code> in <strong>E4</strong>,
this would result in a new binding inside of <strong>E4</strong> (without affecting the
parent environments):</p>
<p></p><center>
<img src="./Lab 8A_files/env2.png" style="width: 3in">
</center><p></p>
<p>Answer the following questions about variable lookup in this updated
environment:</p>
<p>
<!--START question q000006 -->
</p><div class="question question-pythonic" id="cs_qdiv_q000006" style="position: static">
<div id="q000006_rendered_question">
What is the result of evaluating <code>y</code> in <strong>E1</strong>?<br><input id="q000006" name="q000006" size="50" type="text" value="">
</div><div>
<span id="q000006_buttons">
<button class="submit btn btn-catsoop" id="q000006_submit" onclick="catsoop.submit(&#39;q000006&#39;);" style="margin-top: 10px;">Submit</button></span>
<span id="q000006_loading" style="display:none;"><img src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="></span>
<span id="q000006_score_display"></span>
<div class="nsubmits_left" id="q000006_nsubmits_left">You have submitted this assignment 0 times.</div></div>
<div id="q000006_solution_container">
<div id="q000006_solution">
</div>
<div id="q000006_solution_explanation">
</div>
</div>
<div id="q000006_message"></div>
</div>
<!--END question q000006 -->
<p></p>
<p>
<!--START question q000007 -->
</p><div class="question question-pythonic" id="cs_qdiv_q000007" style="position: static">
<div id="q000007_rendered_question">
What is the result of evaluating <code>y</code> in <strong>E2</strong>?<br><input id="q000007" name="q000007" size="50" type="text" value="">
</div><div>
<span id="q000007_buttons">
<button class="submit btn btn-catsoop" id="q000007_submit" onclick="catsoop.submit(&#39;q000007&#39;);" style="margin-top: 10px;">Submit</button></span>
<span id="q000007_loading" style="display:none;"><img src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="></span>
<span id="q000007_score_display"></span>
<div class="nsubmits_left" id="q000007_nsubmits_left">You have submitted this assignment 0 times.</div></div>
<div id="q000007_solution_container">
<div id="q000007_solution">
</div>
<div id="q000007_solution_explanation">
</div>
</div>
<div id="q000007_message"></div>
</div>
<!--END question q000007 -->
<p></p>
<p>
<!--START question q000008 -->
</p><div class="question question-pythonic" id="cs_qdiv_q000008" style="position: static">
<div id="q000008_rendered_question">
What is the result of evaluating <code>y</code> in <strong>E3</strong>?<br><input id="q000008" name="q000008" size="50" type="text" value="">
</div><div>
<span id="q000008_buttons">
<button class="submit btn btn-catsoop" id="q000008_submit" onclick="catsoop.submit(&#39;q000008&#39;);" style="margin-top: 10px;">Submit</button></span>
<span id="q000008_loading" style="display:none;"><img src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="></span>
<span id="q000008_score_display"></span>
<div class="nsubmits_left" id="q000008_nsubmits_left">You have submitted this assignment 0 times.</div></div>
<div id="q000008_solution_container">
<div id="q000008_solution">
</div>
<div id="q000008_solution_explanation">
</div>
</div>
<div id="q000008_message"></div>
</div>
<!--END question q000008 -->
<p></p>
<p>
<!--START question q000009 -->
</p><div class="question question-pythonic" id="cs_qdiv_q000009" style="position: static">
<div id="q000009_rendered_question">
What is the result of evaluating <code>y</code> in <strong>E4</strong>?<br><input id="q000009" name="q000009" size="50" type="text" value="">
</div><div>
<span id="q000009_buttons">
<button class="submit btn btn-catsoop" id="q000009_submit" onclick="catsoop.submit(&#39;q000009&#39;);" style="margin-top: 10px;">Submit</button></span>
<span id="q000009_loading" style="display:none;"><img src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="></span>
<span id="q000009_score_display"></span>
<div class="nsubmits_left" id="q000009_nsubmits_left">You have submitted this assignment 0 times.</div></div>
<div id="q000009_solution_container">
<div id="q000009_solution">
</div>
<div id="q000009_solution_explanation">
</div>
</div>
<div id="q000009_message"></div>
</div>
<!--END question q000009 -->
<p></p>
<p><a name="catsoop_section_7_4_2"></a></p><h4>7.4.2) Environments: Initial Structure</h4><p></p>
<p>For purposes of our REPL, we will start by thinking about two main
environments: an environment to hold the <em>built-in</em> values (such as the <code>+</code>
function) and a "global" environment where top-level definitions from users'
programs will be bound.  For example, running the code below from the REPL
should result in the environment structure shown in the picture that follows:</p>
<pre><code class="nohighlight">in&gt; (define x 3)
  out&gt; 3

in&gt; (define y 4)
  out&gt; 4
</code></pre>
<p></p><center>
<img src="./Lab 8A_files/env_example.png" style="width: 2.5in">
</center><p></p>
<p>Note that, when we look up any of the built-in variables from the global
environment, we end up finding them in the built-ins environment.</p>
<p><a name="catsoop_section_7_5"></a></p><h3>7.5) Evaluator Changes</h3><p></p>
<p>Now, we'll need to add support for variable definition and lookup to our
interpreter by implementing a Python structure for representing an environment
and modifying the <code>evaluate</code> function so that it handles variables and the
<code>define</code> keyword.</p>
<p>Beyond implementing a representation for environments, we will need to make
four modifications to our <code>evaluate</code> function.  We will need to:</p>
<ul>
<li>modify <code>evaluate</code> so that it takes a second (optional) argument: the
    environment in which the expression should be evaluated.  If no environment
    is passed in, an empty environment should be used, whose parent is an
    environment containing all the bindings from the <code>carlae_builtins</code>
    dictionary.</li>
<li>make sure that <code>evaluate</code> handles the <code>define</code> keyword properly, evaluating
    the given expression and storing the result in the environment that was
    passed to <code>evaluate</code>.</li>
<li>modify the way symbols are handled in <code>evaluate</code>, so that if the symbol
    exists as a key in the environment (or a parent environment), <code>evaluate</code>
    returns the associated value.</li>
</ul>
<p><strong>Note</strong> that after implementing these changes, you can test your
implementation using the examples above in the REPL.</p>
<p>To make automatic checking possible, define a function called <code>result_and_env</code>
that takes the same arguments as <code>evaluate</code> but returns a tuple with two
elements: the result of the evaluation and the environment in which the
expression was evaluated.  <strong>Your code will not pass the tests without this
function.</strong>  Note that this function should always return the environment in
which the expression was actually evaluated, <em>even if no environment was
explicitly passed to it</em>.</p>
<p>Consider evaluating the following expressions in order from the same REPL (in
the same environment).  What is the result of evaluating each of these
expressions?</p>
<p>
<!--START question q000010 -->
</p><div class="question question-pythonic" id="cs_qdiv_q000010" style="position: static">
<div id="q000010_rendered_question">
input: <code>(+ 3 2 4 (- 2 7 8))</code><br>output: <input id="q000010" name="q000010" size="50" type="text" value="">
</div><div>
<span id="q000010_buttons">
<button class="submit btn btn-catsoop" id="q000010_submit" onclick="catsoop.submit(&#39;q000010&#39;);" style="margin-top: 10px;">Submit</button></span>
<span id="q000010_loading" style="display:none;"><img src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="></span>
<span id="q000010_score_display"></span>
<div class="nsubmits_left" id="q000010_nsubmits_left">You have submitted this assignment 0 times.</div></div>
<div id="q000010_solution_container">
<div id="q000010_solution">
</div>
<div id="q000010_solution_explanation">
</div>
</div>
<div id="q000010_message"></div>
</div>
<!--END question q000010 -->
<p></p>
<p>
<!--START question q000011 -->
</p><div class="question question-pythonic" id="cs_qdiv_q000011" style="position: static">
<div id="q000011_rendered_question">
input: <code>(define x (+ 2 3))</code><br>output: <input id="q000011" name="q000011" size="50" type="text" value="">
</div><div>
<span id="q000011_buttons">
<button class="submit btn btn-catsoop" id="q000011_submit" onclick="catsoop.submit(&#39;q000011&#39;);" style="margin-top: 10px;">Submit</button></span>
<span id="q000011_loading" style="display:none;"><img src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="></span>
<span id="q000011_score_display"></span>
<div class="nsubmits_left" id="q000011_nsubmits_left">You have submitted this assignment 0 times.</div></div>
<div id="q000011_solution_container">
<div id="q000011_solution">
</div>
<div id="q000011_solution_explanation">
</div>
</div>
<div id="q000011_message"></div>
</div>
<!--END question q000011 -->
<p></p>
<p>
<!--START question q000012 -->
</p><div class="question question-pythonic" id="cs_qdiv_q000012" style="position: static">
<div id="q000012_rendered_question">
input: <code>(define x2 (* x x))</code><br>output: <input id="q000012" name="q000012" size="50" type="text" value="">
</div><div>
<span id="q000012_buttons">
<button class="submit btn btn-catsoop" id="q000012_submit" onclick="catsoop.submit(&#39;q000012&#39;);" style="margin-top: 10px;">Submit</button></span>
<span id="q000012_loading" style="display:none;"><img src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="></span>
<span id="q000012_score_display"></span>
<div class="nsubmits_left" id="q000012_nsubmits_left">You have submitted this assignment 0 times.</div></div>
<div id="q000012_solution_container">
<div id="q000012_solution">
</div>
<div id="q000012_solution_explanation">
</div>
</div>
<div id="q000012_message"></div>
</div>
<!--END question q000012 -->
<p></p>
<p>
<!--START question q000013 -->
</p><div class="question question-pythonic" id="cs_qdiv_q000013" style="position: static">
<div id="q000013_rendered_question">
input: <code>(+ x2 x)</code><br>output: <input id="q000013" name="q000013" size="50" type="text" value="">
</div><div>
<span id="q000013_buttons">
<button class="submit btn btn-catsoop" id="q000013_submit" onclick="catsoop.submit(&#39;q000013&#39;);" style="margin-top: 10px;">Submit</button></span>
<span id="q000013_loading" style="display:none;"><img src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="></span>
<span id="q000013_score_display"></span>
<div class="nsubmits_left" id="q000013_nsubmits_left">You have submitted this assignment 0 times.</div></div>
<div id="q000013_solution_container">
<div id="q000013_solution">
</div>
<div id="q000013_solution_explanation">
</div>
</div>
<div id="q000013_message"></div>
</div>
<!--END question q000013 -->
<p></p>
<p><strong>Test this behavior in your REPL to make sure it matches!</strong>  You may also
wish to test some other similar examples in your REPL.</p>
<p>At this point, your code should pass all the tests in the <code>Test2_Eval</code> suite in
<code>test.py</code>.</p>
<p></p><div class="question">
Note also that, for all of the test cases moving forward, there is a
corresponding file in the <code>carlae_code</code> directory; these files contain the
expressions that are evaluated in the associated test case, with one expression
on each line.  A good exercise if you are failing a test case would be to
figure out by hand what each expression should evaluate to and then try them
by pasting one line at a time into your REPL.  If you are having trouble
figuring out why a given expression evaluates the way it does, please don't
hesitate to ask for help in office hours or on Piazza!
</div><p></p>
<p><a name="catsoop_section_7_6"></a></p><h3>7.6) Evaluator 3: Functions</h3><p></p>
<p>So far, we have a pretty nice calculator, but there are a few things missing
before we can really call it a programming language.  One of those things is
<em>user-defined functions</em>.</p>
<p><a name="catsoop_section_7_6_1"></a></p><h4>7.6.1) Defining functions</h4><p></p>
<p>Currently, the operations we can perform are limited to the functions in the
<code>carlae_builtins</code> dictionary.  We can really empower a user of the language by
allowing them to define functions of their own.  We will accomplish this via
the <code>lambda</code> special form (so called because it is strongly rooted in Church's
<a href="https://en.wikipedia.org/wiki/Lambda_calculus">lambda calculus</a>).</p>
<p>A <code>lambda</code> expression takes the following form: <code>(lambda (PARAM1 PARAM2 ...)
EXPR)</code>.  The result of evaluating such an expression should be an object
representing that function (note that this statement represents a function
<em>definition</em>, not a function <em>call</em>).  Importantly, there are a few things we
need to keep track of with regard to functions.  We need to store:</p>
<ul>
<li>the code representing the body of the function (which, for now, is restricted
    to a single expression representing the return value)</li>
<li>the names of the function's parameters</li>
<li>a pointer to the environment in which the function was defined</li>
</ul>
<p>Once again, it is up to you to determine how exactly a function should be
represented in your interpreter; but it is important that, however it is
represented, it stores the information above (and also that you are able to
distinguish it from the other syntactic forms we have seen so far).</p>
<p>For example, the result of evaluating <code>(lambda (x y) (+ x y))</code> in the global
environment should be an object that stores the following information:</p>
<ul>
<li>the function's parameters, in order, are called <code>x</code> and <code>y</code>.</li>
<li>the function's body is the expression <code>(+ x y)</code>.</li>
<li>the function was defined in the global environment.</li>
</ul>
<p><a name="catsoop_section_7_6_2"></a></p><h4>7.6.2) Calling Functions</h4><p></p>
<p>We also need a way to <em>call</em> user-defined functions.  When the first element in
an S-expression evaluates to a user-defined function, we will need to call the
function by taking the following steps (note that these are the same steps that
Python takes when calling functions):</p>
<ul>
<li>evaluate all of the arguments to the function in the current environment
    (from which the function is being called)</li>
<li>make a new environment whose parent is the environment in which the function
    was <em>defined</em> (this is called <a href="https://en.wikipedia.org/wiki/Scope_%28computer_science%29#Lexical_scope_vs._dynamic_scope">lexical scoping</a>)</li>
<li>in that new environment, bind the function's parameters to the values that
    are passed to it</li>
<li>evaluate the body of the function in that new environment</li>
</ul>
<p>It is worth noting that these steps are very close, if not exactly the same, as the steps Python takes when it calls a function.  The readings for 6.s080 contain some additional explanation and examples (see sections 4-8 of <a href="https://sixohone.mit.edu/6.s080/assignment1.0/readings" target="_blank">Functions</a> and sections 1-2.5 of <a href="https://sixohone.mit.edu/6.s080/assignment1.1/readings" target="_blank">Functions 2</a>).</p>
<p><a name="catsoop_section_7_6_3"></a></p><h4 id="catsoop_label_function_examples" label="function_examples">7.6.3) Examples</h4><p></p>
<p>Here are two examples of calling functions and using <code>lambda</code>.  The first
associates a name with the function and calls the function using that name,
whereas the second calls the function directly without first giving it a name.</p>
<pre><code class="nohighlight">in&gt; (define square (lambda (x) (* x x)))
    out&gt; function object

in&gt; (square 2)
    out&gt; 4
</code></pre>
<pre><code class="nohighlight">in&gt; ((lambda (x) (* x x)) 3)
    out&gt; 9
</code></pre>
<p>
<!--START question q000014 -->
</p><div class="question question-multiplechoice" id="cs_qdiv_q000014" style="position: static">
<div id="q000014_rendered_question">
After evaluating the above code, what is the value of the variable <code>x</code> in the global environment?<br><table border="0">
<tbody><tr><td align="center"><input name="q000014_opts" type="radio" value="0"></td><td><code>2</code></td></tr>
<tr><td align="center"><input name="q000014_opts" type="radio" value="1"></td><td><code>3</code></td></tr>
<tr><td align="center"><input name="q000014_opts" type="radio" value="2"></td><td><code>4</code></td></tr>
<tr><td align="center"><input name="q000014_opts" type="radio" value="3"></td><td><code>x</code> is not bound in the global environment.</td></tr>
</tbody></table><input id="q000014" name="q000014" type="hidden" value="">
<script type="text/javascript">
$("input:radio[name=q000014_opts]").click(function(){
    $("#q000014").val($(this).val());});
</script>
</div><div>
<span id="q000014_buttons">
<button class="submit btn btn-catsoop" id="q000014_submit" onclick="catsoop.submit(&#39;q000014&#39;);" style="margin-top: 10px;">Submit</button></span>
<span id="q000014_loading" style="display:none;"><img src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="></span>
<span id="q000014_score_display"></span>
<div class="nsubmits_left" id="q000014_nsubmits_left">You have submitted this assignment 0 times.</div></div>
<div id="q000014_solution_container">
<div id="q000014_solution">
</div>
<div id="q000014_solution_explanation">
</div>
</div>
<div id="q000014_message"></div>
</div>
<!--END question q000014 -->
<p></p>
<p>Here is another example of a more complicated function.  Note that the result
of calling <code>(foo 3)</code> is a <em>function</em>, which is then called with <code>2</code> as an
argument.  Note also that the value associated with the name <code>x</code> when we call
<code>(bar 2)</code> is the <code>3</code> from the environment in which that function was <em>defined</em>,
not the <code>7</code> from the environment in which it was called.</p>
<pre><code class="nohighlight">in&gt; (define x 7)
    out&gt; 7

in&gt; (define foo (lambda (x) (lambda (y) (+ x y))))
    out&gt; function object

in&gt; (define bar (foo 3))
    out&gt; function object

in&gt; (bar 2)
</code></pre>
<p>
<!--START question bar2 -->
</p><div class="question question-pythonic" id="cs_qdiv_bar2" style="position: static">
<div id="bar2_rendered_question">
What is the result when evaluating <code>(bar 2)</code> in the box above?<br><input id="bar2" name="bar2" size="50" type="text" value="">
</div><div>
<span id="bar2_buttons">
<button class="submit btn btn-catsoop" id="bar2_submit" onclick="catsoop.submit(&#39;bar2&#39;);" style="margin-top: 10px;">Submit</button></span>
<span id="bar2_loading" style="display:none;"><img src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="></span>
<span id="bar2_score_display"></span>
<div class="nsubmits_left" id="bar2_nsubmits_left">You have submitted this assignment 0 times.</div></div>
<div id="bar2_solution_container">
<div id="bar2_solution">
</div>
<div id="bar2_solution_explanation">
</div>
</div>
<div id="bar2_message"></div>
</div>
<!--END question bar2 -->
<p></p>
<p>
<!--START question q000015 -->
</p><div class="question question-multiplechoice" id="cs_qdiv_q000015" style="position: static">
<div id="q000015_rendered_question">
After evaluating the above code, what is the value of the variable <code>x</code> in the global environment?<br><table border="0">
<tbody><tr><td align="center"><input name="q000015_opts" type="radio" value="0"></td><td><code>2</code></td></tr>
<tr><td align="center"><input name="q000015_opts" type="radio" value="1"></td><td><code>3</code></td></tr>
<tr><td align="center"><input name="q000015_opts" type="radio" value="2"></td><td><code>5</code></td></tr>
<tr><td align="center"><input name="q000015_opts" type="radio" value="3"></td><td><code>7</code></td></tr>
<tr><td align="center"><input name="q000015_opts" type="radio" value="4"></td><td><code>9</code></td></tr>
<tr><td align="center"><input name="q000015_opts" type="radio" value="5"></td><td><code>x</code> is not bound in the global environment.</td></tr>
</tbody></table><input id="q000015" name="q000015" type="hidden" value="">
<script type="text/javascript">
$("input:radio[name=q000015_opts]").click(function(){
    $("#q000015").val($(this).val());});
</script>
</div><div>
<span id="q000015_buttons">
<button class="submit btn btn-catsoop" id="q000015_submit" onclick="catsoop.submit(&#39;q000015&#39;);" style="margin-top: 10px;">Submit</button></span>
<span id="q000015_loading" style="display:none;"><img src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="></span>
<span id="q000015_score_display"></span>
<div class="nsubmits_left" id="q000015_nsubmits_left">You have submitted this assignment 0 times.</div></div>
<div id="q000015_solution_container">
<div id="q000015_solution">
</div>
<div id="q000015_solution_explanation">
</div>
</div>
<div id="q000015_message"></div>
</div>
<!--END question q000015 -->
<p></p>
<p>
<!--START question q000016 -->
</p><div class="question question-multiplechoice" id="cs_qdiv_q000016" style="position: static">
<div id="q000016_rendered_question">
After evaluating the above code, what is the value of the variable <code>y</code> in the global environment?<br><table border="0">
<tbody><tr><td align="center"><input name="q000016_opts" type="radio" value="0"></td><td><code>2</code></td></tr>
<tr><td align="center"><input name="q000016_opts" type="radio" value="1"></td><td><code>3</code></td></tr>
<tr><td align="center"><input name="q000016_opts" type="radio" value="2"></td><td><code>5</code></td></tr>
<tr><td align="center"><input name="q000016_opts" type="radio" value="3"></td><td><code>7</code></td></tr>
<tr><td align="center"><input name="q000016_opts" type="radio" value="4"></td><td><code>9</code></td></tr>
<tr><td align="center"><input name="q000016_opts" type="radio" value="5"></td><td><code>y</code> is not bound in the global environment.</td></tr>
</tbody></table><input id="q000016" name="q000016" type="hidden" value="">
<script type="text/javascript">
$("input:radio[name=q000016_opts]").click(function(){
    $("#q000016").val($(this).val());});
</script>
</div><div>
<span id="q000016_buttons">
<button class="submit btn btn-catsoop" id="q000016_submit" onclick="catsoop.submit(&#39;q000016&#39;);" style="margin-top: 10px;">Submit</button></span>
<span id="q000016_loading" style="display:none;"><img src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="></span>
<span id="q000016_score_display"></span>
<div class="nsubmits_left" id="q000016_nsubmits_left">You have submitted this assignment 0 times.</div></div>
<div id="q000016_solution_container">
<div id="q000016_solution">
</div>
<div id="q000016_solution_explanation">
</div>
</div>
<div id="q000016_message"></div>
</div>
<!--END question q000016 -->
<p></p>
<p></p><div class="question"><b>Check Yourself:</b><p>
Why does <code>(bar 2)</code> not evaluate to <code>9</code>?
</p><div class="response"><button onclick="$(&#39;#cs_showhide_82e378c6f8584218bf1a3fd7714c0e54&#39;).toggle();">Show/Hide</button><div id="cs_showhide_82e378c6f8584218bf1a3fd7714c0e54" style="display:none;">
<p>Even though it was called from the global environment, the function we are
referring to as <code>bar</code> was defined inside of an environment, call it <strong>E</strong>,
where <code>x</code> was bound to the value <code>3</code> (the environment that was created when we
evaluated <code>(foo 3)</code>).  When we call <code>(bar 2)</code>, the associated environment's
parent will be <strong>E</strong>, so looking up <code>x</code> finds the value <code>3</code> in <strong>E</strong>, rather
than the value <code>7</code> in the global environment.</p>
<p>It may also help to look at equivalent Python code:
</p><pre><code class="lang-py hljs python">x = <span class="hljs-number">7</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">foo</span><span class="hljs-params">(x)</span>:</span>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">lambda</span> y: x+y
bar = foo(<span class="hljs-number">3</span>)
<span class="hljs-built_in">print</span>(bar(<span class="hljs-number">2</span>))  <span class="hljs-comment"># this prints 5!</span>
</code></pre>
<p></p>
</div></div>
<p></p><p><span id="queue_checkyourself_1"></span></p></div><p></p>
<p><a name="catsoop_section_7_6_4"></a></p><h4>7.6.4) Changes to <code>evaluate</code></h4><p></p>
<p>We will need to make sure that <code>evaluate</code> handles the <code>lambda</code> keyword
properly, by creating a new function object that stores the names of the
parameters, the expression representing the body of the function, and the
environment in which the function was defined.  We also need to modify evaluate
to handle <em>calling</em> user-defined functions.</p>
<p>From a high-level perspective, your evaluator should now work in the following
way, given an expression <code>e</code>:</p>
<ul>
<li>If <code>e</code> represents a number, it should evaluate to that number.</li>
<li>If <code>e</code> represents a variable name, it should evaluate to the value associated
    with that variable in the given environment, or it should raise an
    <code>EvaluationError</code> if a binding cannot be found according to the rules above.</li>
<li>If <code>e</code> represents a special form (such as <code>define</code>), it should be evaluated
    according to the rules for that special form.</li>
<li>Otherwise, <code>e</code> is a compound expression representing a function call.  Each
    of the subexpressions should be evaluated in the given environment, and:<ul>
<li>If the first subexpression is a built-in function, it should be called
    with the remaining subexpressions as arguments (in order).</li>
<li>If the first subexpression is a user-defined function, it should be
    called according to the rules given above.</li>
</ul>
</li>
</ul>
<p>If we try to call something that is not a function, or if we try to call a
function with the incorrect number of arguments passed in, an <code>EvaluationError</code>
should be raised.</p>
<p><strong><font color="red">NOTE</font></strong> that in the case of an S-expression that
isn't a special form, you should not need to care how the first element is
specified (whether it is a name, a <code>lambda</code>, or a call to another function,
etc), so your evaluator should not have conditional behavior based on this.
Evaluating the first element in the S-expression give us the function that is
to be called, regardless of how it is specified (and your evaluator code should
not have conditional logic based on the form of that first element).</p>
<p>After you have made the changes above, try them out in the REPL using the
examples from <a href="https://eecs6009.mit.edu/fall17/labs/lab8A#catsoop_section_7_6_3">subsubsection 7.6.3</a>.  Once you are reasonably
certain that everything is working, try them with <code>test.py</code>.  At this point, your code
should pass the tests in the <code>Test3_Func</code> suite in <code>test.py</code>.</p>
<p><a name="catsoop_section_7_6_5"></a></p><h4>7.6.5) Easier Function Definitions</h4><p></p>
<p>Implementing user-defined functions has given a lot of power to our
interpreter!  But it is kind of a pain to type them out.  Implement a shorter
syntax for function definitions, so that, if the <code>NAME</code> in a <code>define</code>
expression is itself an S-expression, it is implicitly translated to a function
definition before binding.  For example:</p>
<ul>
<li><code>(define (five) (+ 2 3))</code> should be equivalent to <code>(define five (lambda () (+ 2 3)))</code></li>
<li><code>(define (square x) (* x x))</code> should be equivalent to <code>(define square (lambda (x) (* x x)))</code></li>
<li><code>(define (add2 x y) (+ x y))</code> should be equivalent to <code>(define add2 (lambda (x y) (+ x y)))</code></li>
</ul>
<p>This is nice not only because it is easier to type, but also because it makes
the definition of a function more closely mirror the syntax we will use when
calling the function.</p>
<p>Modify your <code>evaluate</code> function so that it handles this new form.  After
implementing this change, try it out in the REPL, and then in <code>test.py</code>.  At
this point, your code should pass all the tests in <code>test.py</code>.</p>
<a name="catsoop_section_8"></a><h2>8) Endnotes</h2>
<p>At this point, we have a very nice start toward an interpreter for <em>carlae</em>.
We have the ability to define variables, and to define and call functions.
Note also that recursion and closures come about naturally as a result of the
rules we have implemented for calling functions (we don't have to do any
additional work to get those features!).</p>
<p>However, we still have some work to do before our language is complete.  In
particular, next week, we will add support for conditionals and lists.</p>
<a name="catsoop_section_9"></a><h2>9) Code Submission</h2>
<p>
<!--START question code -->
</p><div class="question question-lab009" id="cs_qdiv_code" style="position: static">
<div id="code_rendered_question">
<input id="code" name="code" style="display: none" type="file"><button class="btn btn-catsoop" id="code_select_button">Select File</button>&nbsp;<tt><span id="code_selected_file">No file selected</span></tt><script type="text/javascript">$('#code_select_button').click(function (){$("#code").click();});$('#code').change(function (){$('#code_selected_file').text($('#code').val());});</script>
</div><div>
<span id="code_buttons">
<button class="submit btn btn-catsoop" id="code_submit" onclick="catsoop.submit(&#39;code&#39;);" style="margin-top: 10px;">Submit</button></span>
<span id="code_loading" style="display:none;"><img src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="></span>
<span id="code_score_display"></span>
<div class="nsubmits_left" id="code_nsubmits_left">You have submitted this assignment 0 times.</div></div>
<div id="code_solution_container">
<div id="code_solution">
</div>
<div id="code_solution_explanation">
</div>
</div>
<div id="code_message"></div>
</div>
<!--END question code -->
<p></p>
<p>
<!--START question tests -->
</p><div id="tests_rendered_question">
</div><div>
<span id="tests_buttons"></span>
<span id="tests_loading" style="display:none;"><img src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="></span>
<span id="tests_score_display"></span>
<div class="nsubmits_left" id="tests_nsubmits_left"></div></div>
<div id="tests_solution_container">
<div id="tests_solution">
</div>
<div id="tests_solution_explanation">
</div>
</div>
<div id="tests_message"></div>
<!--END question tests -->
<p></p>
<style>
.impsolution{display:none;}
</style>
<a name="catsoop_section_10"></a><h2>10) Checkoff</h2>
<p>Once you are finished with the code, please come to a tutorial, lab session, or
office hour and add yourself to the queue asking for a checkoff.  <strong>You must be
ready to discuss your code and test cases in detail before asking for a checkoff.</strong></p>
<p>You should be prepared to demonstrate your code (which should be
well-commented, should avoid repetition, and should make good use of helper
functions).  In particular, be prepared to discuss:</p>
<ul>
<li>your implementation of <code>tokenize</code> and <code>parse</code></li>
<li>your implementation of environments</li>
<li>how your environment representation handles arbitrary names</li>
<li>how you set up and use environments in <code>evaluate</code> and <code>result_and_env</code></li>
<li>your representation of functions</li>
<li>how user-defined functions are called (including setting up the proper new environments)</li>
<li>your implementation of the REPL (including shared environment, exiting on QUIT, staying alive after errors, and correctly evaluating input expressions</li>
</ul>
<p><a name="catsoop_section_10_1"></a></p><h3>10.1) Grade</h3>
<div class="response"><i>You have not yet received this checkoff.  When you have completed this checkoff, you will see a grade here.</i></div><p></p>
<p>
<!--START question coding -->
</p><div id="coding_rendered_question">
</div><div>
<span id="coding_buttons"></span>
<span id="coding_loading" style="display:none;"><img src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="></span>
<span id="coding_score_display"></span>
<div class="nsubmits_left" id="coding_nsubmits_left"></div></div>
<div id="coding_solution_container">
<div id="coding_solution">
</div>
<div id="coding_solution_explanation">
</div>
</div>
<div id="coding_message"></div>
<!--END question coding -->
<p></p>
<script src="./Lab 8A_files/cs_ajax.js" type="text/javascript"></script>
<script type="text/javascript">
catsoop.all_questions = ['q000000', 'tokenize2', 'q000001', 'parse2', 'parse3', 'parse4', 'q000002', 'q000003', 'q000004', 'q000005', 'q000006', 'q000007', 'q000008', 'q000009', 'q000010', 'q000011', 'q000012', 'q000013', 'q000014', 'bar2', 'q000015', 'q000016', 'code', 'tests', 'coding'];
catsoop.username = 'girishv';
catsoop.api_token = 'ib16MFin41ZcRNqJfKPv1RzFxVPyokfAQMnoQ2ByJHeITGrz4cNAS0TsDSOnrpXWI99J2S';
catsoop.this_path = 'https://eecs6009.mit.edu/fall17/labs/lab8A';
catsoop.path_info = ['fall17', 'labs', 'lab8A'];
catsoop.course = 'fall17';
catsoop.url_root = 'https://eecs6009.mit.edu';
catsoop.imp = '';
catsoop.skip_alert = [];
catsoop.viewans_confirm = "Are you sure?  Viewing the answer will prevent any further submissions to this question.  Press 'OK' to view the answer, or press 'Cancel' if you have changed your mind.";
</script></div>
</div>
<div class="col-md-1"></div>
</div>
</div>
<div id="bottom_menu">
</div>
</div>
<div id="footer">
<pre class="catsooplogo" style="font-size:50%;">\            
/    /\__/\  
\__=(  o_O )=
(__________) 
 |_ |_ |_ |_ </pre>
      Powered by <a href="https://catsoop.mit.edu/" target="_blank">CAT-SOOP</a> (development version).<br>
      CAT-SOOP is <a href="http://www.fsf.org/about/what-is-free-software" target="_blank">free/libre software</a>, available under the terms<br>of the <a href="https://eecs6009.mit.edu/cs_util/license" target="_blank">GNU Affero General Public License, version 3</a>.<br>
      (<a download="" href="https://eecs6009.mit.edu/cs_util/source.zip?course=fall17">Download Source Code</a>)
    </div>



<div class="swal2-container"><div class="swal2-overlay" tabindex="-1"></div><div class="swal2-modal" style="display: none; margin-top: -307px;" tabindex="-1"><div class="swal2-icon swal2-error"><span class="x-mark"><span class="line left"></span><span class="line right"></span></span></div><div class="swal2-icon swal2-question">?</div><div class="swal2-icon swal2-warning">!</div><div class="swal2-icon swal2-info">i</div><div class="swal2-icon swal2-success"><span class="line tip"></span> <span class="line long"></span><div class="placeholder"></div> <div class="fix"></div></div><img class="swal2-image"><h2></h2><div class="swal2-content"></div><input class="swal2-input"><select class="swal2-select"></select><div class="swal2-radio"></div><label for="swal2-checkbox" class="swal2-checkbox"><input type="checkbox" id="swal2-checkbox"></label><textarea class="swal2-textarea"></textarea><div class="swal2-validationerror"></div><hr class="swal2-spacer"><button class="swal2-confirm">OK</button><button class="swal2-cancel">Cancel</button><span class="swal2-close"></span></div></div></body></html>